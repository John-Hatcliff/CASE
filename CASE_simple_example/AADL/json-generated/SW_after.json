{
  "package": "SW_after",
  "components": [
    {
      "name": "color",
      "type": "data",
      "features": [],
      "properties": [],
      "agree": []
    },
    {
      "name": "coord",
      "type": "data",
      "features": [],
      "properties": [],
      "agree": []
    },
    {
      "coord": "coord.impl",
      "connections": [],
      "agree": []
    },
    {
      "name": "wp_message",
      "type": "data",
      "features": [],
      "properties": [],
      "agree": []
    },
    {
      "wp_message": "wp_message.impl",
      "connections": [],
      "agree": []
    },
    {
      "name": "RadioDriver",
      "type": "thread",
      "features": [
        {
          "port": {
            "name": "recv_map_in",
            "type": "event data",
            "flow": "in"
          }
        },
        {
          "port": {
            "name": "send_status_out",
            "type": "event data",
            "flow": "out"
          }
        },
        {
          "port": {
            "name": "send_status_in",
            "type": "event data",
            "flow": "in"
          }
        },
        {
          "port": {
            "name": "recv_map_out",
            "type": "event data",
            "flow": "out"
          }
        }
      ],
      "properties": [],
      "agree": []
    },
    {
      "name": "Filter",
      "type": "thread",
      "features": [
        {
          "port": {
            "name": "recv_map_in",
            "type": "event data",
            "flow": "in"
          }
        },
        {
          "port": {
            "name": "recv_map_out",
            "type": "event data",
            "flow": "out"
          }
        }
      ],
      "properties": [],
      "agree": []
    },
    {
      "Filter": "Filter.impl",
      "connections": [],
      "agree": [
        {
          "statements": [
            {
              "kind": "assert",
              "label": "filter assertion",
              "expr": {
                "kind": "binary",
                "left": {
                  "kind": "binary",
                  "left": {
                    "kind": "nestedDotId",
                    "name": "recv_map_out.coord.alt"
                  },
                  "op": ">=",
                  "right": {
                    "kind": "intLit",
                    "value": "50"
                  }
                },
                "op": "and",
                "right": {
                  "kind": "binary",
                  "left": {
                    "kind": "nestedDotId",
                    "name": "recv_map_out.color"
                  },
                  "op": "=",
                  "right": {
                    "kind": "aadlEnum",
                    "type": {
                      "kind": "nestedDotId",
                      "name": "color"
                    },
                    "value": "Red"
                  }
                }
              }
            }
          ],
          "comments": []
        }
      ]
    },
    {
      "name": "FlightPlanner",
      "type": "thread",
      "features": [
        {
          "port": {
            "name": "flight_plan",
            "type": "data",
            "flow": "out"
          }
        },
        {
          "port": {
            "name": "recv_map",
            "type": "event data",
            "flow": "in"
          }
        },
        {
          "port": {
            "name": "position_status",
            "type": "event data",
            "flow": "in"
          }
        }
      ],
      "properties": [],
      "agree": [
        {
          "statements": [
            {
              "kind": "assume",
              "label": "recv_map valid 1",
              "expr": {
                "kind": "binary",
                "left": {
                  "kind": "binary",
                  "left": {
                    "kind": "nestedDotId",
                    "name": "recv_map.coord.alt"
                  },
                  "op": ">=",
                  "right": {
                    "kind": "intLit",
                    "value": "50"
                  }
                },
                "op": "and",
                "right": {
                  "kind": "binary",
                  "left": {
                    "kind": "binary",
                    "left": {
                      "kind": "nestedDotId",
                      "name": "recv_map.color"
                    },
                    "op": "=",
                    "right": {
                      "kind": "aadlEnum",
                      "type": {
                        "kind": "nestedDotId",
                        "name": "color"
                      },
                      "value": "Red"
                    }
                  },
                  "op": "or",
                  "right": {
                    "kind": "binary",
                    "left": {
                      "kind": "nestedDotId",
                      "name": "recv_map.color"
                    },
                    "op": "=",
                    "right": {
                      "kind": "aadlEnum",
                      "type": {
                        "kind": "nestedDotId",
                        "name": "color"
                      },
                      "value": "Green"
                    }
                  }
                }
              }
            }
          ],
          "comments": []
        }
      ]
    },
    {
      "name": "WaypointManager",
      "type": "thread",
      "features": [
        {
          "port": {
            "name": "flight_plan",
            "type": "data",
            "flow": "in"
          }
        },
        {
          "port": {
            "name": "waypoint",
            "type": "event data",
            "flow": "out"
          }
        },
        {
          "port": {
            "name": "position_status",
            "type": "event data",
            "flow": "in"
          }
        }
      ],
      "properties": [],
      "agree": []
    },
    {
      "name": "UARTDriver",
      "type": "thread",
      "features": [
        {
          "port": {
            "name": "position_status_in",
            "type": "event data",
            "flow": "in"
          }
        },
        {
          "port": {
            "name": "waypoint_out",
            "type": "event data",
            "flow": "out"
          }
        },
        {
          "port": {
            "name": "position_status_out",
            "type": "event data",
            "flow": "out"
          }
        },
        {
          "port": {
            "name": "waypoint_in",
            "type": "event data",
            "flow": "in"
          }
        }
      ],
      "properties": [],
      "agree": []
    },
    {
      "name": "MC_SW",
      "type": "process",
      "features": [
        {
          "port": {
            "name": "recv_map",
            "type": "event data",
            "flow": "in"
          }
        },
        {
          "port": {
            "name": "send_status",
            "type": "event data",
            "flow": "out"
          }
        },
        {
          "port": {
            "name": "waypoint",
            "type": "event data",
            "flow": "out"
          }
        },
        {
          "port": {
            "name": "position_status",
            "type": "event data",
            "flow": "in"
          }
        }
      ],
      "properties": [],
      "agree": [
        {
          "statements": [
            {
              "kind": "eq",
              "expr": "null"
            },
            {
              "kind": "gurantee",
              "label": "fpv",
              "expr": {
                "kind": "binary",
                "left": {
                  "kind": "nestedDotId",
                  "name": "fpv"
                },
                "op": ">=",
                "right": {
                  "kind": "intLit",
                  "value": "0"
                }
              }
            }
          ],
          "comments": []
        }
      ]
    },
    {
      "MC_SW": "MC_SW.impl",
      "connections": [
        {
          "name": "c1",
          "source": "recv_map",
          "destination": "RADIO.recv_map_in"
        },
        {
          "name": "c2",
          "source": "RADIO.send_status_out",
          "destination": "send_status"
        },
        {
          "name": "c3A",
          "source": "RADIO.recv_map_out",
          "destination": "FLTR.recv_map_in"
        },
        {
          "name": "c3B",
          "source": "FLTR.recv_map_out",
          "destination": "FPLN.recv_map"
        },
        {
          "name": "c4",
          "source": "FPLN.flight_plan",
          "destination": "WPM.flight_plan"
        },
        {
          "name": "c5",
          "source": "WPM.waypoint",
          "destination": "UART.waypoint_in"
        },
        {
          "name": "c6",
          "source": "UART.position_status_out",
          "destination": "WPM.position_status"
        },
        {
          "name": "c7",
          "source": "UART.position_status_out",
          "destination": "FPLN.position_status"
        },
        {
          "name": "c8",
          "source": "UART.position_status_out",
          "destination": "RADIO.send_status_in"
        },
        {
          "name": "c9",
          "source": "UART.waypoint_out",
          "destination": "waypoint"
        },
        {
          "name": "c10",
          "source": "position_status",
          "destination": "UART.position_status_in"
        }
      ],
      "agree": [
        {
          "statements": [
            {
              "kind": "assign",
              "expr": {
                "kind": "nestedDotId",
                "name": "FPLN.recv_map"
              }
            }
          ],
          "comments": []
        },
        {
          "statements": [
            {
              "kind": "eq",
              "expr": "null"
            },
            {
              "kind": "gurantee",
              "label": "fpv",
              "expr": {
                "kind": "binary",
                "left": {
                  "kind": "nestedDotId",
                  "name": "fpv"
                },
                "op": ">=",
                "right": {
                  "kind": "intLit",
                  "value": "0"
                }
              }
            }
          ],
          "comments": []
        }
      ]
    }
  ]
}